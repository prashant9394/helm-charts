
Trustagent
===========

A Helm chart for Installing ISecL-DC Trust Agent


## Configuration

The following table lists the configurable parameters of the Trustagent chart and their default values.

| Parameter                | Description             | Default        |
| ------------------------ | ----------------------- | -------------- |
| `nameOverride` | The name for TA chart<br> (Default: `.Chart.Name`) | `""` |
| `controlPlaneHostname` | K8s control plane IP/Hostname<br> (**REQUIRED**) | `"<user input>"` |
| `nodeLabel.txt` | The node label for TXT-ENABLED hosts<br> (**REQUIRED IF NODE IS TXT ENABLED**) | `""` |
| `nodeLabel.suefi` | The node label for SUEFI-ENABLED hosts (**REQUIRED IF NODE IS SUEFI ENABLED**) | `""` |
| `versionUpgrade` | Set this true when performing upgrading to next minor/major version | `false` |
| `currentVersion` | Set the currently deployed version | `null` |
| `dependentServices.cms` |  | `"cms"` |
| `dependentServices.aas` |  | `"aas"` |
| `dependentServices.hvs` |  | `"hvs"` |
| `dependentServices.nats` |  | `"nats"` |
| `image.svc.name` | The image registry where TA image is pushed<br> (**REQUIRED**) | `"<user input>"` |
| `image.svc.pullPolicy` | The pull policy for pulling from container registry for TA <br> (Allowed values: `Always`/`IfNotPresent`) | `"Always"` |
| `image.svc.imagePullSecret` | The image pull secret for authenticating with image registry, can be left empty if image registry does not require authentication | `null` |
| `image.svc.initName` |  | `"<user input>"` |
| `image.aasManager.name` | The image registry where AAS Manager image is pushed<br> (**REQUIRED**) | `"<user input>"` |
| `image.aasManager.pullPolicy` | The pull policy for pulling from container registry for AAS Manager <br> (Allowed values: `Always`/`IfNotPresent`) | `"Always"` |
| `image.aasManager.imagePullSecret` | The image pull secret for authenticating with image registry, can be left empty if image registry does not require authentication | `null` |
| `image.aasManager.initName` | The image name of init container | `"<user input>"` |
| `config.logLevel` | Log Level for Trust agent<br> (Allowed values: `info`/`warn`/`debug`/`trace`) | `"info"` |
| `config.provisionAttestation` | TPM provisioning<br> (Allowed values: `y`\`n`) | `"y"` |
| `config.tpmOwnerSecret` | The TPM owner secret if TPM is already owned | `null` |
| `config.tpmEndorsementSecret` | The TPM endorsement secret if TPM is already owned | `null` |
| `config.nats.enabled` | Enable/Disable NATS mode<br> (Allowed values: `true`\`false`) | `false` |
| `config.nats.servers` | NATS Server IP/Hostname | `"<user input>"` |
| `config.nats.serviceMode` | The model for TA<br> (Allowed values: `outbound`) | `"<user input>"` |
| `aas.url` |  | `null` |
| `aas.secret.adminUsername` | Admin Username for AAS | `null` |
| `aas.secret.adminPassword` | Admin Password for AAS | `null` |
| `secret.installAdminUsername` | Admin Username for TA | `null` |
| `secret.installAdminPassword` | Admin Password for TA | `null` |
| `securityContext.aasManager.runAsUser` |  | `1001` |
| `securityContext.aasManager.runAsGroup` |  | `1001` |
| `securityContext.aasManager.capabilities.drop` |  | `["all"]` |
| `securityContext.aasManager.allowPrivilegeEscalation` |  | `false` |
| `securityContext.aasManagerInit.fsGroup` |  | `1001` |
| `hostAliasEnabled` | Set this to true for using host aliases and also add entries accordingly in ip, hostname entries. hostalias is required when ingress is deployed and pods are not able to resolve the domain names | `false` |
| `aliases.hostAliases` |  | `[{"ip": "", "hostnames": ["", ""]}]` |
| `service.directoryName` |  | `"trustagent"` |
| `service.cms.containerPort` | The containerPort on which CMS can listen | `8445` |
| `service.aas.containerPort` | The containerPort on which AAS can listen | `8444` |
| `service.hvs.containerPort` | The containerPort on which HVS can listen | `8443` |
| `service.hvs.port` |  | `30443` |
| `service.ta.containerPort` | The containerPort on which TA can listen | `1443` |
| `service.ta.port` | The externally exposed NodePort on which TA can listen to external traffic | `31443` |



---
_Documentation generated by [Frigate](https://frigate.readthedocs.io)._

